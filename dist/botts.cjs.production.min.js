"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function t(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach((function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})})),t.default=e,t}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("fs"),s=e(require("path")),r=require("discord.js"),i=e(require("chalk"));const{red:n,yellow:a,blue:l,magenta:c,green:h}=i;var m;(m=exports.LogLevel||(exports.LogLevel={}))[m.Error=0]="Error",m[m.Warning=1]="Warning",m[m.Info=2]="Info",m[m.Debug=3]="Debug",m[m.Verbose=4]="Verbose";class g{constructor(e=exports.LogLevel.Info){this.colors=[n,a,l,c,h],this.level=e}emit(e,t=exports.LogLevel.Info){"string"==typeof t&&(t=exports.LogLevel[t]),t>this.level||console.log(this.colors[t](`[${exports.LogLevel[t]}]`),e.toString())}}exports.BotClass=class extends r.Client{constructor(e,t,o,i){super(i),this.commands=new r.Collection,this.events=new r.Collection,this.logger=new g(i.logLevel),this.prefix=e,this.token=t,this.owners=o,this.commandFolder=s.resolve(i.commandFolder),this.eventFolder=s.resolve(i.eventFolder),this.init()}async init(){try{await this.registerCommands(),await this.eventDispatcher(),this.on("message",e=>this.commandDispatcher(e)),this.on("messageUpdate",e=>this.commandDispatcher(e)),await this.login(this.token),setInterval(()=>{this.logger.emit("[ws] Heartbeat ping: "+this.ws.ping)},3e4)}catch(e){throw this.logger.emit("Uncaught error while attempting init sequence: \n"+e,exports.LogLevel.Error)}}async registerCommands(){const e=o.readdirSync(this.commandFolder).filter(e=>e.endsWith(".js"));this.logger.emit("commandfiles = "+e,exports.LogLevel.Verbose);for(const o of e){var r;const e=s.resolve(s.join(this.commandFolder,o));let i;this.logger.emit("fullPath = "+e,exports.LogLevel.Verbose),this.logger.emit("Attempting to register commands in "+e,exports.LogLevel.Debug);try{i=new((await new Promise((function(o){o(t(require(e)))}))).default)(this)}catch(e){this.logger.emit("Error while registering commands: \n"+e,exports.LogLevel.Error)}this.logger.emit("command = "+i.name,exports.LogLevel.Verbose),this.commands.set(i.name,i),null==(r=i.aliases)||r.forEach(e=>{const t=Object.assign(Object.create(Object.getPrototypeOf(i)),i);t.name=e,this.commands.set(e,t)})}}async eventDispatcher(){const e=o.readdirSync(this.eventFolder).filter(e=>e.endsWith(".js"));for(const o of e){const e=s.resolve(s.join(this.eventFolder,o)),r=new((await new Promise((function(o){o(t(require(e)))}))).default)(this),i=r.name||o;this[r.once?"once":"on"](i,(...e)=>{r.run(...e),this.logger.emit("dispatched event with name "+i,exports.LogLevel.Debug)})}}async commandDispatcher(e){var t;if(e.partial||!e.content.startsWith(this.prefix)||e.content.length<this.prefix.length||e.author.bot)return;const o=e.content.slice(this.prefix.length).split(" "),s=null==(t=o.shift())?void 0:t.toLowerCase();if(!this.commands.has(s))return;if("reload"===s)await this.registerCommands(),e.reply("reloaded");else if("unload"===s){const t=this.commands.has(o[0]);if(this.logger.emit("hasCmd "+t,exports.LogLevel.Verbose),!t)return;this.commands.delete(o[0]),this.logger.emit(Array.from(this.commands.keys()).toString(),exports.LogLevel.Verbose),e.reply("unloaded")}else"reinit"===s&&(await this.init(),e.reply("reinit"));this.logger.emit("commandKeys = "+Array.from(this.commands.keys()).join(", ").toString(),exports.LogLevel.Verbose);const r=this.commands.find(e=>e.name===s);if(!r)throw this.logger.emit("Could not find command with name "+s,exports.LogLevel.Warning);r.ownerOnly&&!this.owners.includes(e.author.id)||(r.run(e,o),this.logger.emit("dispatched command with name "+r.name,exports.LogLevel.Debug))}},exports.Command=class{constructor(e){this.ownerOnly=!1,this.shouldHandle=!0,this.client=e}},exports.Event=class{constructor(e){this.once=!1,this.client=e}},exports.Logger=g;
//# sourceMappingURL=botts.cjs.production.min.js.map
